---
type ExperienceItem = {
  company: string;
  title: string;
  subtitle?: string;
  datesLabel: string;
  scope?: string;
  highlights: string[];
  tech?: string;
  leadership: string[];
};

type Props = {
  title: string;
  kicker: string;
  items: ExperienceItem[];
};

const { title, kicker, items } = Astro.props;
---

<section id="experience" class="pt-14 pb-9 sm:pt-16 sm:pb-10">
  <div class="mx-auto max-w-[var(--content)] px-4 sm:px-6">
    <div class="flex items-baseline justify-between gap-4">
      <h2 class="text-xs font-mono tracking-[0.28em] text-[rgb(var(--muted))] uppercase">{title}</h2>
      {kicker ? <p class="text-sm text-[rgb(var(--ink)/0.78)]">{kicker}</p> : null}
    </div>

    <div class="mt-6 space-y-3">
      {items.map((item) => {
        const bullets: string[] = [];
        if (item.scope) bullets.push(item.scope);
        if (item.tech) bullets.push(`Stack: ${item.tech}`);
        if (item.highlights?.length) bullets.push(...item.highlights);
        if (item.leadership?.length) bullets.push(...item.leadership);

        return (
          <article class="rounded-[var(--radius-md)] border border-[rgb(var(--hairline))] bg-[rgb(var(--surface))] shadow-[var(--shadow)]">
            <div class="px-4 py-4 sm:px-5 sm:py-5">
              <div class="flex flex-wrap items-start justify-between gap-3">
                <div class="min-w-0">
                  <div class="flex flex-wrap items-center gap-x-3 gap-y-1">
                    <h3 class="text-lg font-semibold text-[rgb(var(--ink))]">{item.company}</h3>
                    {item.datesLabel ? (
                      <span class="font-mono text-xs text-[rgb(var(--muted))] tracking-wide">{item.datesLabel}</span>
                    ) : null}
                  </div>
                  <p class="mt-1 text-sm text-[rgb(var(--ink)/0.78)]">
                    <span class="font-medium">{item.title}</span>
                    {item.subtitle ? <span class="text-[rgb(var(--muted))]"> Â· {item.subtitle}</span> : null}
                  </p>
                </div>
              </div>

              {bullets.length ? (
                <ul class="mt-4 space-y-2">
                  {bullets.map((b) => (
                    <li class="flex items-start gap-3 text-sm text-[rgb(var(--ink)/0.78)]">
                      <span class="mt-2 h-1.5 w-1.5 rounded-full" style={`background: rgb(var(--accent))`} aria-hidden="true" />
                      <span class="leading-relaxed">{b}</span>
                    </li>
                  ))}
                </ul>
              ) : null}
            </div>
          </article>
        );
      })}
    </div>
  </div>
</section>


