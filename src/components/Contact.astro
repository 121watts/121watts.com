---
type Props = {
  title: string;
  kicker: string;
  note?: string;
  contact: { email: string; linkedin?: string; github?: string };
};

const { title, kicker, note, contact } = Astro.props;
---

<section id="contact" class="pt-9 pb-14 sm:pt-10 sm:pb-16">
  <div class="mx-auto max-w-[var(--content)] px-4 sm:px-6">
    <div class="flex items-baseline justify-between gap-4">
      <h2 class="text-xs font-mono tracking-[0.28em] text-[rgb(var(--muted))] uppercase">{title}</h2>
      {kicker ? <p class="text-sm text-[rgb(var(--ink)/0.78)]">{kicker}</p> : null}
    </div>

    <div class="mt-6 rounded-[var(--radius-lg)] border border-[rgb(var(--hairline))] bg-[rgb(var(--surface))] shadow-[var(--shadow)]">
      <div class="px-5 py-6 sm:px-8 sm:py-8">
        {note ? <p class="text-base text-[rgb(var(--ink)/0.78)] leading-relaxed max-w-prose">{note}</p> : null}

        <div class={(note ? 'mt-5' : 'mt-0') + ' flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between'}>
          {contact.email ? (
            <div class="h-10 flex items-center">
              <span class="font-mono text-xs tracking-[0.18em] text-[rgb(var(--muted))] uppercase">Email</span>
              <span class="ml-3 text-sm font-medium text-[rgb(var(--ink))]">{contact.email}</span>
              <button
                class="ml-2 inline-flex size-8 items-center justify-center rounded-lg border border-[rgb(var(--hairline))] bg-[rgb(var(--surface-2))] text-[rgb(var(--muted))] hover:text-[rgb(var(--ink))] hover:shadow transition cursor-pointer"
                type="button"
                data-copy
                data-copy-value={contact.email}
                aria-label="Copy email"
                title="Copy"
              >
                <span class="sr-only">Copy email</span>
                <!-- Overlapping squares (copy icon) -->
                <svg class="h-4 w-4 copy-icon copy-icon-copy" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <rect x="9" y="9" width="10" height="10" rx="2" stroke="currentColor" stroke-width="1.6" />
                  <rect x="5" y="5" width="10" height="10" rx="2" stroke="currentColor" stroke-width="1.6" opacity="0.85" />
                </svg>
                <!-- Check (shown briefly after copy) -->
                <svg class="h-4 w-4 copy-icon copy-icon-check" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M20 7L10.5 16.5L4 10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </button>
            </div>
          ) : (
            <div />
          )}

          <div class="flex flex-wrap gap-2 sm:justify-end">
            {contact.linkedin ? (
              <a
                class="inline-flex h-10 items-center justify-center rounded-xl border border-[rgb(var(--hairline))] bg-[rgb(var(--surface-2))] px-3.5 text-sm font-medium leading-none text-[rgb(var(--muted))] hover:text-[rgb(var(--ink))] hover:shadow transition"
                href={contact.linkedin}
                target="_blank"
                rel="noopener noreferrer"
              >
                <span class="relative -top-px">LinkedIn</span>
              </a>
            ) : null}
            {contact.github ? (
              <a
                class="inline-flex h-10 items-center justify-center rounded-xl border border-[rgb(var(--hairline))] bg-[rgb(var(--surface-2))] px-3.5 text-sm font-medium leading-none text-[rgb(var(--muted))] hover:text-[rgb(var(--ink))] hover:shadow transition"
                href={contact.github}
                target="_blank"
                rel="noopener noreferrer"
              >
                <span class="relative -top-px">GitHub</span>
              </a>
            ) : null}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style is:global>
  /* Copy icon state swap */
  .copy-icon-check { display: none; }
  button[data-copy][data-copied='true'] .copy-icon-copy { display: none; }
  button[data-copy][data-copied='true'] .copy-icon-check { display: block; }
</style>


